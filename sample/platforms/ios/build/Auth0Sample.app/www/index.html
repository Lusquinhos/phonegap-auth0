<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Auth0 PhoneGap sample</title>
    </head>
    <body>
        <div class="app">
            <button id="login-connection">Login with Google</button>
            <button id="login-widget">Login with Widget</button>
            <hr>
            <span>Username: </span><input type="text" id="login-username" />
            <span>Password: </span><input type="password" id="login-password" />
            <button id="login-username-password">Login with Username/Password</button>
            <hr>
            <p id="result">Not logged in yet.</p>
        </div>

        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="js/auth0.js"></script>
        <script type="text/javascript">
            $(document).on('deviceready', function() {
                var domain = 'YOUR_AUTH0_DOMAIN'; // e.g.: contoso.auth0.com
                var clientId = 'YOUR_CLIENT_ID';
                var clientSecret = 'YOUR_CLIENT_SECRET';
                var connection = 'google-oauth2'; // change to "facebook", "paypal", "linkedin", etc.
                var dbConnection = 'Username-Password-Authentication'; // Database Connection

                var auth0Client = new Auth0Client(domain, clientId, clientSecret);

                $('#login-widget').on('click', function() {
                    $('#result').html('Loading...');
                    
                    auth0Client.login(function (err, auth0User) {
                        if (err) {
                            alert(err);
                            $('#result').html('error: ' + err.message);
                        }
                        else {
                            // * Use auth0User to do wonderful things, e.g.:
                            // - get user email => auth0User.profile.email
                            // - get facebook/google/twitter/etc access token => auth0User.profile.identities[0].access_token
                            // - get Windows Azure AD groups => auth0User.profile.groups
                            // - etc.
                            $('#result').html('Hello ' + auth0User.profile.name + '!');
                        }
                    });
                });

                $('#login-connection').on('click', function() {
                    $('#result').html('Loading...');

                    auth0Client.login({ connection: connection }, function (err, auth0User) {
                        if (err) $('#result').html('error: ' + err.message);
                        else {
                            // * Use auth0User to do wonderful things, e.g.:
                            // - get user email => auth0User.profile.email
                            // - get facebook/google/twitter/etc access token => auth0User.profile.identities[0].access_token
                            // - get Windows Azure AD groups => auth0User.profile.groups
                            // - etc.
                            $('#result').html('Hello ' + auth0User.profile.name + '!');
                        }
                    });
                });

                $('#login-username-password').on('click', function() {
                    $('#result').html('Loading...');

                    var username = $('#login-username').val();
                    var password = $('#login-password').val();

                    auth0Client.login({ connection: dbConnection, username: username, password: password }, function (err, auth0User) {
                        if (err) $('#result').html('error: ' + err.message);
                        else {
                            // * Use auth0User to do wonderful things, e.g.:
                            // - get user email => auth0User.profile.email
                            // - get facebook/google/twitter/etc access token => auth0User.profile.identities[0].access_token
                            // - get Windows Azure AD groups => auth0User.profile.groups
                            // - etc.
                            $('#result').html('Hello ' + auth0User.profile.name + '!');
                        }
                    });
                });
            });
        </script>
    </body>
</html>
